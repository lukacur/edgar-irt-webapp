<div class="p-3">
    <label class="text-sm">{{ labelText }}</label>

    <div #choiceList class="relative">
        <div
            class="p-3 bg-white border border-slate-500/50 rounded cursor-pointer w-full flex justify-between items-center"
            (click)="optionsExpanded = !optionsExpanded"
        >
            <div>{{ selectText ?? "" }}</div>
            <mat-icon class="select-none">{{ (optionsExpanded) ? "expand_less" : "expand_more" }}</mat-icon>
        </div>
        <ul
            class="p-3 mt-1 bg-white border border-slate-500/50 rounded w-full absolute z-50"
            [ngClass]="ngClassObj"
            *ngIf="optionsExpanded"
        >
            <li class="mb-3 bg-white" *ngIf="searchable">
                <div class="relative">
                    <mat-icon class="absolute top-1/2 -translate-y-1/2 mx-3 select-none">search</mat-icon>
                    <input
                        #searchInput
                        class="w-full py-3 ps-10 rounded border border-slate-400/25"
                        type="text" [(ngModel)]="searchTerm"
                        [ngModelOptions]="{ standalone: true }"
                    >
                    <mat-icon
                        class="absolute top-1/2 -translate-y-1/2 right-0 mx-3 select-none cursor-pointer"
                        (click)="clearSearch()"
                    >
                        close
                    </mat-icon>
                </div>
            </li>
            <li
                class="p-2 cursor-pointer border-t border-slate-400/25 hover:bg-blue-400/15 bg-white"
                *ngFor="let selectableItem of getFilteredItems()"
                (click)="
                    selectValue = selectableItem[valueKey];
                    control.setValue(selectValue);
                    selectText = selectableItem[textKey];
                    optionsExpanded = false;
                "
            >
                {{ selectableItem[textKey] }}
            </li>
        </ul>
    </div>
</div>
